<!-- Social Media Icons -->
                <div class="flex justify-center space-x-6 mt-4">
                <a href="https://facebook.com/YourPage" target="_blank" class="text-gray-500 hover:text-blue-600 transition">
                    <i class="fab fa-facebook-f fa-lg"></i>
                    <span class="sr-only">Facebook</span>
                </a>
                <a href="https://twitter.com/YourProfile" target="_blank" class="text-gray-500 hover:text-blue-400 transition">
                    <i class="fab fa-twitter fa-lg"></i>
                    <span class="sr-only">Twitter</span>
                </a>
                <a href="https://whatsapp.com/channel/0029Vav2A1CEwEk0N2paBj3X" target="_blank" class="text-gray-500 hover:text-green-500 transition">
                    <i class="fab fa-whatsapp fa-lg"></i>
                    <span class="sr-only">WhatsApp</span>
                </a>
                <a href="https://instagram.com/harrdyyy_07" target="_blank" class="text-gray-500 hover:text-pink-500 transition">
                    <i class="fab fa-instagram fa-lg"></i>
                    <span class="sr-only">Instagram</span>
                </a>
                <a href="https://linkedin.com/in/YourProfile" target="_blank" class="text-gray-500 hover:text-blue-700 transition">
                    <i class="fab fa-linkedin-in fa-lg"></i>
                    <span class="sr-only">LinkedIn</span>
                </a>
                <a href="https://github.com/YourProfile" target="_blank" class="text-gray-500 hover:text-gray-900 transition">
                    <i class="fab fa-github fa-lg"></i>
                    <span class="sr-only">GitHub</span>
                </a>
                </div>
                <!-- /Social Media Icons -->











                <section id="branches" class="py-16 ">
    <div class="container mx-auto px-4">
        <h2 class="text-4xl font-bold text-center mb-12 text-slate-800"> Branches</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
            <?php
            $branches_result = $conn->query("SELECT * FROM branches ORDER BY name ASC");
            if ($branches_result->num_rows > 0):
                while($branch = $branches_result->fetch_assoc()):
                    // This line checks if a specific entry exists for the branch, otherwise it uses the DEFAULT
                    $meta = $branch_meta_data[$branch['short_name']] ?? $branch_meta_data['DEFAULT'];
            ?>
            <div class="bg-white hover:bg-gradient-to-r from-purple-100 via-purple-100 to-purple-200  rounded-2xl shadow-lg overflow-hidden flex flex-col group transform hover:-translate-y-2 transition-transform duration-500">
                <div class="relative">
                    <img class="w-full h-48 object-cover" src="<?php echo $meta['image']; ?>" alt="<?php echo htmlspecialchars($branch['name']); ?>">
                    <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"></div>
                    
                </div>
                
                <div class="p-6 flex-grow flex flex-col">
                    <h3 class="text-2xl font-bold text-slate-800  mb-2"><?php echo htmlspecialchars($branch['name']); ?></h3>
                    
                    <div class="flex items-center space-x-4 text-sm text-slate-500 border-y my-4 py-3">
                        <div class="flex items-center space-x-2">
                            <i class="fas fa-book-open text-black"></i>
                            <span>7+ Subjects</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <i class="fas fa-file-alt text-black"></i>
                            <span>12+ Notes</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <i class="fas fa-graduation-cap text-black"></i>
                            <span>3-8 Sem</span>
                        </div>
                    </div>

                    

                    <a href="semesters.php?branch_id=<?php echo $branch['id']; ?>" class="w-full bg-gradient-to-r from-purple-500 to-purple-700 text-white font-bold py-2 px-4 rounded-2xl text-center border-2 border-purple-600 group-hover:from-purple-600 group-hover:to-purple-800 transition-colors duration-300">
                        View
                    </a>
                </div>
            </div>
            <?php 
                endwhile;
            endif;
            ?>
        </div>
    </div>
</section>


















<?php require_once 'common/header.php'; ?>

<div class="container mx-auto py-12 px-4">
    <div class="max-w-3xl mx-auto">
        <!-- Page Header -->
        <div class="text-center mb-10">
            <h1 class="text-4xl font-bold text-slate-800 dark:text-white">SGPA Calculator</h1>
            <p class="text-lg text-slate-500 dark:text-slate-400 mt-2">Calculate your Semester Grade Point Average instantly.</p>
        </div>

        <!-- Calculator Form -->
        <div class="bg-white dark:bg-slate-800 p-6 sm:p-8 rounded-xl shadow-lg">
            <form id="sgpa-form">
                <div class="mb-6">
                    <label for="scheme-select" class="block text-sm font-medium text-gray-700 dark:text-slate-300 mb-1">Select Your Scheme</label>
                    <select id="scheme-select" class="w-full p-3 border border-gray-300 dark:border-slate-600 dark:bg-slate-700 rounded-lg focus:ring-2 focus:ring-blue-500">
                        <option value="2022">2022 Scheme</option>
                        <option value="2021">2021 Scheme</option>
                        <option value="2018">2018 Scheme</option>
                    </select>
                </div>
                
                <hr class="my-6 dark:border-slate-600">
                
                <!-- Subject rows will be inserted here -->
                <div id="subjects-container" class="space-y-4">
                    <!-- Rows will be added by JavaScript -->
                </div>

                <!-- Action Buttons -->
                <div class="mt-6 flex flex-col sm:flex-row gap-4">
                    <button type="button" id="add-subject-btn" class="w-full bg-blue-100 dark:bg-slate-700 text-blue-700 dark:text-slate-200 font-semibold p-3 rounded-lg hover:bg-blue-200 dark:hover:bg-slate-600">
                        <i class="fas fa-plus-circle mr-2"></i>Add Subject
                    </button>
                    <button type="button" id="reset-btn" class="w-full bg-gray-200 dark:bg-slate-600 text-gray-800 dark:text-slate-200 font-semibold p-3 rounded-lg hover:bg-gray-300 dark:hover:bg-slate-500">
                        <i class="fas fa-undo mr-2"></i>Reset
                    </button>
                </div>

                <div class="mt-6">
                    <button type="submit" class="w-full bg-green-600 text-white font-bold text-lg p-4 rounded-lg hover:bg-green-700 transition-transform hover:scale-105">
                        Calculate SGPA
                    </button>
                </div>
            </form>
        </div>

        <!-- Result Display Area -->
        <div id="result-container" class="hidden mt-8 bg-blue-50 dark:bg-slate-800 p-8 rounded-xl shadow-lg text-center border border-blue-200 dark:border-slate-700">
             <p class="text-lg font-medium text-blue-800 dark:text-slate-300">Your Calculated SGPA is</p>
             <p id="sgpa-result" class="text-7xl font-bold text-blue-600 dark:text-blue-400 my-2">0.00</p>
             <p id="result-message" class="text-slate-600 dark:text-slate-400"></p>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function () {
    const form = document.getElementById('sgpa-form');
    const subjectsContainer = document.getElementById('subjects-container');
    const addSubjectBtn = document.getElementById('add-subject-btn');
    const resetBtn = document.getElementById('reset-btn');
    const resultContainer = document.getElementById('result-container');
    const sgpaResultEl = document.getElementById('sgpa-result');
    const resultMessageEl = document.getElementById('result-message');

    const getGradePoint = (marks) => {
        if (marks >= 90) return 10;
        if (marks >= 80) return 9;
        if (marks >= 70) return 8;
        if (marks >= 60) return 7;
        if (marks >= 55) return 6;
        if (marks >= 50) return 5;
        if (marks >= 40) return 4;
        return 0; // Fail grade
    };

    const addRow = () => {
        const rowCount = subjectsContainer.children.length + 1;
        const newRow = document.createElement('div');
        newRow.className = 'flex items-center gap-2 sm:gap-4 animate-fade-in';
        newRow.innerHTML = `
            <span class="font-bold text-slate-500 w-8 text-center">${rowCount}.</span>
            <input type="number" name="credits[]" placeholder="Credits" class="w-1/3 p-3 border border-gray-300 dark:border-slate-600 dark:bg-slate-700 rounded-lg" min="1" max="10" required>
            <input type="number" name="marks[]" placeholder="Marks" class="w-1/3 p-3 border border-gray-300 dark:border-slate-600 dark:bg-slate-700 rounded-lg" min="0" max="100" required>
            <button type="button" class="remove-row-btn bg-red-100 dark:bg-red-900/50 text-red-600 dark:text-red-400 h-12 w-1/3 sm:w-auto sm:px-4 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/80 transition-colors flex items-center justify-center gap-2">
                <i class="fas fa-trash-alt"></i><span class="hidden sm:inline">Remove</span>
            </button>`;
        subjectsContainer.appendChild(newRow);
    };
    
    const updateRowNumbers = () => {
        const rows = subjectsContainer.children;
        for (let i = 0; i < rows.length; i++) {
            rows[i].querySelector('span').textContent = `${i + 1}.`;
        }
    };

    // Add initial rows
    for (let i = 0; i < 5; i++) {
        addRow();
    }
    
    addSubjectBtn.addEventListener('click', addRow);

    subjectsContainer.addEventListener('click', function (e) {
        const removeBtn = e.target.closest('.remove-row-btn');
        if (removeBtn) {
            removeBtn.closest('.flex').remove();
            updateRowNumbers();
        }
    });

    form.addEventListener('submit', function (e) {
        e.preventDefault();
        
        const creditInputs = document.querySelectorAll('input[name="credits[]"]');
        const markInputs = document.querySelectorAll('input[name="marks[]"]');
        
        let totalCredits = 0;
        let weightedGradePoints = 0;
        let hasFailed = false;

        for (let i = 0; i < creditInputs.length; i++) {
            const credits = parseInt(creditInputs[i].value);
            const marks = parseInt(markInputs[i].value);
            
            if (isNaN(credits) || isNaN(marks) || credits <= 0) continue;
            
            const gradePoint = getGradePoint(marks);
            if (gradePoint === 0) hasFailed = true;
            
            totalCredits += credits;
            weightedGradePoints += credits * gradePoint;
        }

        if (totalCredits === 0) {
            alert('Please enter valid credits and marks for at least one subject.');
            return;
        }
        
        const sgpa = hasFailed ? 0 : (weightedGradePoints / totalCredits);

        sgpaResultEl.textContent = sgpa.toFixed(2);
        resultMessageEl.textContent = hasFailed ? 'You may have failed in one or more subjects.' : 'Congratulations on your performance!';
        resultContainer.classList.remove('hidden');
        resultContainer.scrollIntoView({ behavior: 'smooth' });
    });

    resetBtn.addEventListener('click', function() {
        subjectsContainer.innerHTML = '';
        for (let i = 0; i < 5; i++) { addRow(); }
        resultContainer.classList.add('hidden');
        form.reset();
    });
});
</script>
<style>
    @keyframes fade-in {
        from { opacity: 0; transform: scale(0.95); }
        to { opacity: 1; transform: scale(1); }
    }
    .animate-fade-in {
        animation: fade-in 0.3s ease-out forwards;
    }
</style>

<?php require_once 'common/footer.php'; ?>
















# Turn on the rewrite engine
RewriteEngine On

# Set the base path for the project
RewriteBase /vtu_notes/

# --- SECURITY & PERFORMANCE ---
# Prevent access to sensitive files
RewriteRule ^(common|admin/common)/ - [F,L]
RewriteRule \.(env|git|gitignore|htaccess)$ - [F,L]

# --- STATIC PAGES (Remove .php extension) ---
# Main pages
RewriteRule ^/?$ index.php [L]
RewriteRule ^about/?$ about.php [NC,L]
RewriteRule ^contact-us/?$ contactus.php [NC,L]
RewriteRule ^privacy-policy/?$ privacy.php [NC,L]
RewriteRule ^terms-conditions/?$ Terms&Condition.php [NC,L]
RewriteRule ^disclaimer/?$ disclaimer.php [NC,L]
RewriteRule ^faqs/?$ faqs.php [NC,L]
RewriteRule ^sitemap/?$ sitemap.php [NC,L]

# Calculator pages
RewriteRule ^cgpa-calculator/?$ cgpa_calculator.php [NC,L]
RewriteRule ^sgpa-calculator/?$ sgpa_calculator.php [NC,L]
RewriteRule ^sgpa-calculators/?$ sgpa_calculators.php [NC,L]

# Content pages
RewriteRule ^notes/?$ notes.php [NC,L]
RewriteRule ^upload-notes/?$ upload.php [NC,L]
RewriteRule ^view-note/([0-9]+)/?$ view.php?id=$1 [NC,L]

# --- DYNAMIC PAGES (Clean URLs) ---
# Branch-based URLs
RewriteRule ^branches/?$ semesters.php [NC,L]
RewriteRule ^branch/([^/]+)/?$ semesters.php?branch_slug=$1 [NC,L]
RewriteRule ^branch/([^/]+)/semester-([0-9]+)/?$ subjects.php?branch_slug=$1&semester=$2 [NC,L]
RewriteRule ^branch/([^/]+)/semester-([0-9]+)/subject/([^/]+)/?$ notes.php?branch_slug=$1&semester=$2&subject_slug=$3 [NC,L]

# Alternative clean URLs
RewriteRule ^semesters/branch/([0-9]+)/?$ semesters.php?branch_id=$1 [NC,L]
RewriteRule ^subjects/branch/([0-9]+)/semester/([0-9]+)/?$ subjects.php?branch_id=$1&sem_id=$2 [NC,L]
RewriteRule ^notes/subject/([0-9]+)/?$ notes.php?subject_id=$1 [NC,L]

# --- ADMIN SECTION ---
RewriteRule ^admin/?$ admin/index.php [NC,L]
RewriteRule ^admin/login/?$ admin/login.php [NC,L]
RewriteRule ^admin/notes/?$ admin/manage_notes.php [NC,L]
RewriteRule ^admin/subjects/?$ admin/manage_subjects.php [NC,L]
RewriteRule ^admin/uploads/?$ admin/manage_uploads.php [NC,L]

# --- FALLBACK RULES ---
# Prevent rewriting for existing files and directories
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# If the requested file doesn't exist, try adding .php extension
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.+?)/?$ $1.php [L]

# Handle 404 errors gracefully
ErrorDocument 404 /vtu_notes/404.php

# --- NEW BLOG RULES ---
RewriteRule ^blog/?$ blog.php [NC,L]
RewriteRule ^blog/([a-zA-Z0-9-]+)/?$ post.php?slug=$1 [NC,L]
